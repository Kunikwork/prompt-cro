<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Conversion Booster - CRO Analysis Tool</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Source+Code+Pro:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    /* Base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: linear-gradient(135deg, #1a1c20, #24262b, #1d1f23);
      color: #f5f5f5;
      font-family: 'Poppins', 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6; /* Reduced line height for better space usage */
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      padding: 15px; /* Reduced from 20px */
      background-attachment: fixed;
    }
    /* Weather animations */
    .weather-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    @keyframes rain {
      0% { background-position: 0 0; }
      100% { background-position: 0 100%; }
    }
    @keyframes snow {
      0% { background-position: 0 0; }
      100% { background-position: 20px 100px; }
    }
    @keyframes wind {
      0% { transform: translateX(0); }
      100% { transform: translateX(20px); }
    }
    .weather-rain {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="100" viewBox="0 0 20 100"><line x1="10" y1="0" x2="10" y2="100" stroke="rgba(148, 163, 184, 0.1)" stroke-width="1"/></svg>');
      background-size: 20px 100px;
      animation: rain 1s linear infinite;
      opacity: 0.5;
    }
    .weather-snow {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><circle cx="20" cy="20" r="1.5" fill="rgba(200, 200, 255, 0.2)"/></svg>');
      background-size: 40px 40px;
      animation: snow 10s linear infinite;
      opacity: 0.5;
    }
    .weather-wind {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="20" viewBox="0 0 100 20"><path d="M0,10 Q25,5 50,10 T100,10" stroke="rgba(148, 163, 184, 0.1)" stroke-width="1" fill="none"/></svg>');
      background-size: 100px 20px;
      animation: wind 5s linear infinite;
      opacity: 0.3;
    }
    .weather-sunny {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 10% 20%, rgba(251, 191, 36, 0.05) 0%, transparent 20%),
                  radial-gradient(circle at 90% 80%, rgba(245, 158, 11, 0.05) 0%, transparent 20%);
      opacity: 0.2;
    }
    /* Container */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 15px; /* Reduced from 20px */
      position: relative;
      z-index: 10;
    }
    /* Header - Enhanced glass effect */
    header {
      text-align: center;
      margin-bottom: 12px; /* Reduced from 15px */
      padding: 15px 20px; /* Reduced from 20px 25px */
      background: rgba(20, 20, 30, 0.25);
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
      animation: fadeIn 0.8s ease-out;
      transition: all 0.4s ease;
    }
    header:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* Gradient border effect - smoother animation */
    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 20px;
      background: linear-gradient(45deg, #8a2be2, #ff00ff, #4a90e2, #8a2be2) border-box;
      -webkit-mask: 
        linear-gradient(#fff 0 0) padding-box, 
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: destination-out;
      mask-composite: exclude;
      z-index: -1;
      animation: borderAnimation 15s ease infinite;
      background-size: 300% 300%;
    }
    @keyframes borderAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    h1 {
      font-size: 3.2rem;
      margin-bottom: 8px; /* Reduced from 10px */
      font-weight: 700;
      background: linear-gradient(90deg, #f5f5f5, #d4d4d4);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      letter-spacing: -0.5px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    #greeting {
      font-size: 2.2rem;
      margin-bottom: 8px; /* Reduced from 10px */
      font-weight: 400;
      color: #d4d4d4;
      min-height: 2.5rem;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .name-gradient {
      background: linear-gradient(90deg, #8a2be2, #ff00ff, #4a90e2);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-weight: 600;
      animation: gradientAnimation 12s ease infinite;
      background-size: 300% 300%;
    }
    @keyframes gradientAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
.subtitle {
  font-size: 1.3rem;
  max-width: 90%;  /* Changed from fixed 700px to percentage */
  margin: 0 auto;
  color: #d4d4d4;
  font-weight: 300;
  line-height: 1.6;
  background: rgba(0, 0, 0, 0.2);
  padding: 10px 15px;
  border-radius: 15px;
  backdrop-filter: blur(5px);
  border: 1px solid rgba(255, 255, 255, 0.05);
}
    /* How to use section */
    .how-to-use {
      background: rgba(20, 20, 30, 0.25);
      border-radius: 20px;
      padding: 15px; /* Reduced from 20px */
      margin-bottom: 12px; /* Reduced from 15px */
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      animation: slideUp 0.8s ease-out;
      transition: all 0.4s ease;
    }
    .how-to-use:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .how-to-use-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #f5f5f5;
      margin-bottom: 10px; /* Reduced from 15px */
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .how-to-use-title i {
      color: #8a2be2;
      font-size: 1.3rem;
    }
    .how-to-use-steps {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px; /* Reduced from 15px */
      margin-top: 12px; /* Reduced from 15px */
    }
    .step {
      background: rgba(10, 10, 20, 0.3);
      border-radius: 12px;
      padding: 12px; /* Reduced from 15px */
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }
    .step-number {
      background: linear-gradient(45deg, #8a2be2, #ff00ff);
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      flex-shrink: 0;
    }
    .step-content {
      font-size: 0.95rem;
      line-height: 1.4; /* Reduced from 1.5 */
    }
    .step-highlight {
      color: #4a90e2;
      font-weight: 500;
    }
    .ai-model-link {
      color: #8a2be2;
      font-weight: 500;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      display: inline-block;
    }
    .ai-model-link:hover {
      color: #ff00ff;
    }
    .ai-model-link:after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, #8a2be2, #ff00ff);
      transition: width 0.3s ease;
    }
    .ai-model-link:hover:after {
      width: 100%;
    }
    .copy-feedback {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: linear-gradient(45deg, #4CAF50, #2E7D32);
      color: white;
      padding: 12px 20px;
      border-radius: 50px;
      font-weight: 500;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
    }
    .copy-feedback.show {
      transform: translateY(0);
      opacity: 1;
    }
    /* Prompt container */
    .prompt-container {
      background: rgba(20, 20, 30, 0.25);
      border-radius: 20px;
      padding: 15px; /* Reduced from 20px */
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      margin-bottom: 15px; /* Reduced from 20px */
      animation: slideUp 0.8s ease-out;
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1), height 0.6s cubic-bezier(0.4, 0, 0.2, 1), max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      max-height: 350px; /* Reduced from 450px */
      display: flex;
      flex-direction: column;
    }
    .prompt-container:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
    }
    .prompt-container.expanded {
      max-height: calc(100vh - 100px) !important;
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .prompt-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px; /* Reduced from 15px */
      padding-bottom: 12px; /* Reduced from 15px */
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    .prompt-title {
      font-size: 1.8rem;
      font-weight: 600;
      color: #f5f5f5;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .prompt-title i {
      color: #8a2be2;
      font-size: 1.5rem;
    }
    /* Copy button */
    #copy-button {
      background: linear-gradient(90deg, #8a2be2, #ff00ff, #4a90e2);
      background-size: 300% 300%;
      color: white;
      border: none;
      padding: 10px 20px; /* Reduced from 12px 24px */
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: hidden;
      animation: gradientAnimation 12s ease infinite;
    }
    #copy-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    }
    #copy-button:active {
      transform: translateY(1px);
    }
    #copy-button.copied {
      background: linear-gradient(45deg, #4CAF50, #2E7D32);
      box-shadow: 0 6px 20px rgba(46, 125, 50, 0.3);
      animation: none;
    }
    #copy-button.copied::after {
      content: 'Copied!';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(46, 125, 50, 0.9);
    }
    /* Prompt text */
    #prompt-text {
      background: rgba(10, 10, 20, 0.3);
      border-radius: 16px;
      padding: 15px; /* Reduced from 20px */
      max-height: 280px; /* Reduced from 370px */
      overflow-y: auto;
      font-family: 'Source Code Pro', monospace;
      font-size: 1.05rem;
      line-height: 1.6; /* Reduced from 1.8 */
      color: #f0f0f0;
      border: 1px solid rgba(255, 255, 255, 0.05);
      white-space: pre-wrap;
      backdrop-filter: blur(5px);
      flex: 1;
    }
    #prompt-text::-webkit-scrollbar {
      width: 10px;
    }
    #prompt-text::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.1);
      border-radius: 10px;
    }
    #prompt-text::-webkit-scrollbar-thumb {
      background: linear-gradient(45deg, #8a2be2, #ff00ff, #4a90e2);
      border-radius: 10px;
      background-size: 300% 300%;
      animation: gradientAnimation 12s ease infinite;
    }
    /* Prompt formatting */
    .prompt-section {
      color: #8a2be2;
      font-weight: 600;
      margin-top: 15px; /* Reduced from 20px */
      margin-bottom: 8px; /* Reduced from 10px */
      display: block;
    }
    .prompt-subsection {
      color: #ff00ff;
      font-weight: 500;
      margin-top: 12px; /* Reduced from 15px */
      margin-bottom: 4px; /* Reduced from 5px */
      display: block;
    }
    .prompt-highlight {
      color: #4a90e2;
      font-weight: 500;
    }
    .prompt-example {
      background: rgba(255, 255, 255, 0.05);
      padding: 8px 12px; /* Reduced from 10px 15px */
      border-radius: 8px;
      margin: 8px 0; /* Reduced from 10px 0 */
      display: block;
      border-left: 3px solid #8a2be2;
    }
    .prompt-important {
      color: #ff6b6b;
      font-weight: 600;
    }
    /* Table styling */
    .audit-table {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0; /* Reduced from 15px 0 */
      font-size: 0.95rem;
    }
    
    .audit-table th, .audit-table td {
      border: 1px solid rgba(255, 255, 255, 0.1);
      padding: 8px; /* Reduced from 10px */
      text-align: left;
    }
    
    .audit-table th {
      background-color: rgba(138, 43, 226, 0.2);
      color: #f0f0f0;
      font-weight: 600;
    }
    
    .audit-table tr:nth-child(even) {
      background-color: rgba(255, 255, 255, 0.05);
    }
    
    .audit-table tr:hover {
      background-color: rgba(138, 43, 226, 0.1);
    }
    
    /* Responsive design */
    @media (min-width: 1600px) {
      .container {
        max-width: 1600px;
      }
      h1 {
        font-size: 3.8rem;
      }
      #greeting {
        font-size: 2.8rem;
      }
  .subtitle {
  font-size: 1.6rem;
  max-width: 95%;  /* Changed from fixed 900px to percentage */
}
      .prompt-title {
        font-size: 2.2rem;
      }
      #prompt-text {
        font-size: 1.2rem;
        padding: 15px; /* Reduced from 20px */
        max-height: calc(100vh - 300px); /* More aggressive reduction */
      }
      .how-to-use {
        padding: 15px; /* Reduced from 20px */
      }
      .how-to-use-title {
        font-size: 1.8rem;
      }
      .step {
        padding: 12px; /* Reduced from 15px */
      }
      .step-content {
        font-size: 1.1rem;
      }
      /* Adjust for larger screens to show content above fold */
      .prompt-container {
        max-height: calc(100vh - 220px); /* More aggressive reduction */
      }
    }
    
    @media (min-width: 1200px) and (max-width: 1599px) {
      .container {
        max-width: 1300px;
      }
      h1 {
        font-size: 3.5rem;
      }
      #greeting {
        font-size: 2.5rem;
      }
      .subtitle {
  font-size: 1.5rem;
  max-width: 95%;  /* Changed from fixed 800px to percentage */
}
      .prompt-title {
        font-size: 2rem;
      }
      #prompt-text {
        font-size: 1.1rem;
        padding: 15px; /* Reduced from 20px */
        max-height: calc(100vh - 300px); /* More aggressive reduction */
      }
      .how-to-use {
        padding: 15px; /* Reduced from 20px */
      }
      .how-to-use-title {
        font-size: 1.7rem;
      }
      .step {
        padding: 12px; /* Reduced from 15px */
      }
      .step-content {
        font-size: 1.05rem;
      }
      /* Adjust for medium-large screens to show content above fold */
      .prompt-container {
        max-height: calc(100vh - 220px); /* More aggressive reduction */
      }
    }
    
    @media (max-width: 1199px) {
      .container {
        max-width: 1100px;
      }
      /* Reset to original sizing for smaller screens */
      .prompt-container {
        max-height: 400px; /* Reduced from 500px */
      }
      #prompt-text {
        max-height: 320px; /* Reduced from 400px */
      }
    }
    
    @media (max-width: 992px) {
      .how-to-use-steps {
        grid-template-columns: 1fr; /* Switch to single column on medium screens */
      }
    }
    
    @media (max-width: 768px) {
      h1 {
        font-size: 2.4rem;
      }
      
      #greeting {
        font-size: 1.8rem;
      }
      
      .prompt-container {
        padding: 15px; /* Reduced from 20px */
      }
      
      .prompt-header {
        flex-direction: column;
        gap: 15px; /* Reduced from 20px */
        text-align: center;
      }
      
      #prompt-text {
        padding: 15px; /* Reduced from 20px */
        font-size: 0.98rem;
      }
      
      #copy-button {
        width: 100%;
        justify-content: center;
      }
      
      .audit-table {
        font-size: 0.85rem;
      }
      
      .how-to-use-steps {
        grid-template-columns: 1fr; /* Single column on mobile */
      }
      
      .step {
        padding: 12px; /* Reduced from 15px */
      }
    }
    
    @media (max-width: 480px) {
      h1 {
        font-size: 2rem;
      }
      
      #greeting {
        font-size: 1.5rem;
      }
      
      .subtitle {
        font-size: 1rem;
      }
      
      .prompt-title {
        font-size: 1.5rem;
      }
      
      .audit-table {
        display: block;
        overflow-x: auto;
      }
    }
    
    /* Loader */
    .loader {
      display: inline-block;
      margin-left: 10px;
    }
    .loader::after {
      content: "";
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid #f5f5f5;
      border-color: #f5f5f5 transparent #f5f5f5 transparent;
      animation: loader 1.2s linear infinite;
    }
    @keyframes loader {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Weather animation container -->
  <div class="weather-animation">
    <div class="weather-rain"></div>
    <div class="weather-snow"></div>
    <div class="weather-wind"></div>
    <div class="weather-sunny"></div>
  </div>
  
  <div class="container">
    <header>
      <h1>Conversion Booster</h1>
      <div id="greeting">Hello<span class="loader"></span></div>
      <p class="subtitle">Deliver ruthless, tactical, high-clarity CRO audits for any public-facing website</p>
    </header>
    
    <!-- How to use section -->
    <div class="how-to-use">
      <h2 class="how-to-use-title"><i class="fas fa-lightbulb"></i> How to Use This Prompt</h2>
      <div class="how-to-use-steps">
        <div class="step">
          <div class="step-number">1</div>
          <div class="step-content">Copy the prompt using the <span class="step-highlight">Copy Prompt</span> button</div>
        </div>
        <div class="step">
          <div class="step-number">2</div>
          <div class="step-content">Run it in a reasoning model (<span id="ai-model" class="ai-model-link"></span>)</div>
        </div>
        <div class="step">
          <div class="step-number">3</div>
          <div class="step-content">Enable <span id="ai-mode" class="step-highlight"></span> feature</div>
        </div>
        <div class="step">
          <div class="step-number">4</div>
          <div class="step-content">Paste your website URL and other requested details</div>
        </div>
      </div>
    </div>
    
    <main>
      <div class="prompt-container" id="prompt-container">
        <div class="prompt-header">
          <h2 class="prompt-title"><i class="fas fa-chart-line"></i> Ultimate CRO Analysis Prompt</h2>
          <button id="copy-button">
            <i class="fas fa-copy"></i> Copy Prompt
          </button>
        </div>
        <pre id="prompt-text"></pre>
      </div>
    </main>
  </div>
  
  <!-- Copy feedback notification -->
  <div id="copy-feedback" class="copy-feedback">
    <i class="fas fa-check-circle"></i> Copied to clipboard!
  </div>
  
  <script>
    // AI models data
    const aiModels = [
      { name: 'Z.ai', mode: 'Auto Think + Web Search', url: 'https://chat.z.ai/', priority: 1 },
      { name: 'ChatGPT O Version', mode: 'Think Longer Or Deep Research', url: 'https://chatgpt.com/', priority: 1 },
      { name: 'Perplexity', mode: '', url: 'https://www.perplexity.ai/', priority: 1 },
      { name: 'Gemini Pro Version', mode: '', url: 'https://gemini.google.com/app', priority: 1 },
      { name: 'Gemini Flash Version', mode: 'Deep Research', url: 'https://gemini.google.com/app', priority: 2 },
      { name: 'Claud', mode: 'Extended Thinking', url: 'https://claude.ai/new', priority: 2 },
      { name: 'DeepSeek', mode: 'DeepThink + Search', url: 'https://chat.deepseek.com/', priority: 2 },
      { name: 'Qwen', mode: 'Thinking + Search', url: 'https://chat.qwen.ai/', priority: 2 }
    ];
    
    // Get query parameter from URL
    function getQueryParam(key) {
      return new URLSearchParams(window.location.search).get(key);
    }
    
    // Determine greeting by local hour
    function getGreeting(hour) {
      if (hour >= 5 && hour < 12)    return "Good Morning";
      if (hour >= 12 && hour < 17)   return "Good Afternoon";
      if (hour >= 17 && hour < 22)   return "Good Evening";
      return "Hello";
    }
    
    // Typewriter effect
    async function typeWriter(element, text, speed = 120) {
      element.textContent = "";
      for (let i = 0; i < text.length; i++) {
        element.textContent += text.charAt(i);
        await new Promise(resolve => setTimeout(resolve, speed));
      }
    }
    
    // Show copy feedback
    function showCopyFeedback() {
      const feedback = document.getElementById('copy-feedback');
      feedback.classList.add('show');
      setTimeout(() => {
        feedback.classList.remove('show');
      }, 2000);
    }
    
    // Format prompt text with CRO content
    function formatPromptText() {
      const promptText = document.getElementById('prompt-text');
      let content = `<span class="prompt-section">CONVERSION BOOSTER - ULTIMATE CRO ANALYSIS PROMPT</span>
<span class="prompt-subsection">INITIAL USER REQUEST CHECK</span>
First, check if the user has provided a website URL in their message. 
- If the user has not provided a website URL, respond ONLY with: "To begin your comprehensive CRO analysis, please provide the following details: Required: Website URL: Optional: Primary conversion goal: (e.g., sales, leads, signups) Target audience: (e.g., demographics, industry) Current conversion metrics: (e.g., conversion rate %, bounce rate) Specific concerns or challenges: Point me to your website and let's dig in. Goals or numbers? Throw them in if you've got them. The more I know, the deeper I go." Then STOP. Do not proceed with any analysis.
- If the user has provided a website URL (with or without optional details), immediately proceed with all phases of the CRO analysis. Do not repeatedly request optional details if the user chooses not to provide them. Optional fields may be used if provided, but their absence must not block or delay the analysis.
<span class="prompt-subsection">MANDATORY EXECUTION RULES:</span>
- Once a website URL is provided, immediately initiate the CRO analysis sequence.
- Execute ALL phases (1 through 8) in numerical order without stopping, skipping, or asking for additional input unless required to clarify ambiguous site elements.
- Treat each phase as mandatory. No phases may be skipped for lack of optional information, simulate missing data where necessary.
- Produce outputs for every required table, section, and score, even if based on inferred or simulated research.
- Do not pause for confirmation between phases; the analysis must proceed continuously from start to finish in one uninterrupted response.
- Use placeholder or simulated metrics where the user has not provided specific data, but label them clearly as simulated or estimated.
- DEFAULT BEHAVIOR: Perform a comprehensive audit of the ENTIRE WEBSITE, not just the provided URL. Crawl and analyze all accessible pages including homepage, product/service pages, about, contact, blog, etc.
- EXCEPTION: Only audit specific URLs if the user EXPLICITLY states to limit the audit to certain pages/URLs.
- Do not ask the user whether they want a full website audit or specific page audit - full website audit is the default.
- For website types that typically have checkout/lead forms but are missing them, include recommendations to implement these features if appropriate for the business model.
<span class="prompt-subsection">CORE IDENTITY</span>
You are Conversion Booster - an elite conversion rate optimization specialist that delivers ruthless, tactical, high-clarity audits for any public-facing website. Mobile-first. E-commerce optimized. ZERO skips. ZERO filler.
<span class="prompt-section">EXECUTION PROTOCOL</span>
<span class="prompt-subsection">PHASE 1: INTAKE & RESEARCH SIMULATION</span>
<span class="prompt-highlight">Process:</span>
1. <span class="prompt-highlight">Website Analysis:</span>
   - Load and analyze the provided URL as the entry point
   - Crawl and analyze the ENTIRE WEBSITE (all accessible pages)
   - Detect tech stack (Shopify, WooCommerce, etc.)
   - Identify page types and conversion paths across the entire site
   - Evaluate mobile responsiveness across multiple page types
   - Identify if this is an e-commerce, B2B, lead gen, SaaS, service, or publisher site
2. <span class="prompt-highlight">Deep Research Simulation:</span>
   - Analyze 5 competitor site UX flows
   - Review 3 recent industry forums/Reddit threads
   - Research current year design best practices
   - Simulate review sentiment from Trustpilot, Google, etc.
   - Apply tactical UX psychology principles
3. <span class="prompt-highlight">Auto-Detection:</span>
   - Country/target market from site content
   - Primary goal (sales, leads, calls) from CTAs and page structure
   - 10-15 competitors from public data
   - Tech stack and integrations
   - Identify missing conversion elements typical for this business type
<span class="prompt-subsection">PHASE 2: COMPREHENSIVE AUDIT FRAMEWORK</span>
<span class="prompt-highlight">AUDIT GRID FORMAT (USE FOR ALL SECTIONS)</span>
<table class="audit-table">
  <tr>
    <th>Section</th>
    <th>‚≠ê Score</th>
    <th>What's There</th>
    <th>What's Not Working</th>
    <th>How to Fix It</th>
    <th>Priority</th>
  </tr>
  <tr>
    <td colspan="6">[Content will be dynamically generated based on analysis]</td>
  </tr>
</table>
<span class="prompt-important">VAGUE FIX BLOCKER:</span> Each "How to Fix It" must include:
- A/B test structure
- Example site doing it right
- Specific microcopy or design element
- CRO principle (anchoring, contrast bias, etc.)
<span class="prompt-highlight">SECTION-BY-SECTION ANALYSIS (ALL REQUIRED)</span>
<span class="prompt-subsection">üöÄ Homepage Header</span>
- Above-the-fold elements
- Value proposition clarity
- Primary CTA visibility
- Navigation structure
- Trust signals placement
<span class="prompt-subsection">üß≠ Navigation</span>
- Menu structure and organization
- Mobile hamburger menu
- Search functionality
- Category hierarchy
- User flow efficiency
<span class="prompt-subsection">üõçÔ∏è Product/Service Listings</span>
- Grid/list view options
- Filtering capabilities
- Sorting options
- Product card information
- Quick view functionality
<span class="prompt-subsection">üîé On-site Search</span>
- Search bar visibility
- Autocomplete functionality
- Search results relevance
- Filters in search results
- "No results" handling
<span class="prompt-subsection">üì± Mobile UX</span>
- Touch-friendly interface
- Page load speed
- Image optimization
- Form field sizes
- Checkout flow
<span class="prompt-subsection">üßæ Checkout/Purchase Process (ANALYZE IF PRESENT, RECOMMEND IF ABSENT FOR E-COMMERCE)</span>
- Steps and progress indicator
- Form fields and validation
- Payment options
- Guest checkout
- Error handling
- Note: If this is an e-commerce site without checkout functionality, strongly recommend implementation
<span class="prompt-subsection">üõ†Ô∏è Lead Generation (ANALYZE IF PRESENT, RECOMMEND IF ABSENT FOR B2B/LEAD GEN SITES)</span>
- Form placement and visibility
- Field requirements
- Value proposition
- Submit button design
- Thank you page
- Note: If this is a B2B or lead generation site without lead forms, strongly recommend implementation
<span class="prompt-subsection">üîê Trust Signals</span>
- Social proof placement
- Security badges
- Return policy visibility
- Contact information
- Professional design
<span class="prompt-subsection">üß≤ Urgency & Scarcity Tactics</span>
- Stock indicators
- Countdown timers
- Limited-time offers
- Social proof of popularity
- Exclusivity messaging
<span class="prompt-subsection">üë§ About Page</span>
- Company story
- Team information
- Value proposition
- Trust building elements
- Differentiation factors
<span class="prompt-subsection">üì¨ Contact Page</span>
- Contact form
- Business hours
- Location/map
- Contact methods
- Response time expectations
<span class="prompt-subsection">üí° Content & Copy</span>
- Headline effectiveness
- Benefit-focused language
- Scannability
- Readability
- Emotional triggers
<span class="prompt-subsection">üé® Design & Visual Elements</span>
- Visual hierarchy
- Color scheme
- Typography
- Imagery quality
- Whitespace usage
<span class="prompt-subsection">‚ö° Performance & Technical</span>
- Page load speed
- Mobile responsiveness
- Browser compatibility
- Technical SEO
- Tracking implementation
<span class="prompt-subsection">üîÑ Customer Journey Analysis</span>
- Entry points
- User flow paths
- Drop-off points
- Conversion barriers
- Post-conversion experience
<span class="prompt-subsection">üéØ Personalization Elements</span>
- Dynamic content
- Recommendation engines
- User-specific messaging
- Behavioral targeting
- Customized experiences
<span class="prompt-subsection">üìä Data & Analytics Implementation</span>
- Event tracking
- Conversion funnel setup
- User segmentation
- Goal configuration
- Attribution modeling
<span class="prompt-subsection">üîç Advanced SEO Integration</span>
- Content optimization
- Structured data
- Internal linking
- Page experience signals
- Local SEO elements
<span class="prompt-subsection">üåê International & Localization</span>
- Multi-language support
- Currency display
- Regional pricing
- Cultural adaptation
- Local payment methods
<span class="prompt-subsection">‚ôø Accessibility Compliance</span>
- WCAG adherence
- Screen reader compatibility
- Keyboard navigation
- Color contrast
- Alternative text
<span class="prompt-subsection">ü§ñ AI & Automation Integration</span>
- Chatbot effectiveness
- Automated email sequences
- Personalization algorithms
- Predictive recommendations
- Behavioral triggers
<span class="prompt-subsection">üîó Third-Party Integration Analysis</span>
- Social media connectivity
- Payment gateway efficiency
- CRM integration
- Marketing automation tools
- Analytics platforms
<span class="prompt-subsection">üì± Progressive Web App (PWA) Features</span>
- Offline functionality
- App-like experience
- Push notification capabilities
- Installation prompts
- Home screen accessibility
<span class="prompt-subsection">üîí Privacy & Compliance</span>
- Cookie consent implementation
- GDPR/CCPA compliance
- Data collection transparency
- Privacy policy accessibility
- Security measures
<span class="prompt-subsection">PHASE 3: COMPETITIVE ANALYSIS</span>
<span class="prompt-highlight">COMPETITOR SNAPSHOT</span>
<table class="audit-table">
  <tr>
    <th>Competitor</th>
    <th>Homepage UX</th>
    <th>Product Page UX</th>
    <th>Mobile</th>
    <th>Speed</th>
    <th>Trust Signals</th>
    <th>CTA Quality</th>
    <th>UX Differentiator Found</th>
  </tr>
  <tr>
    <td colspan="8">[Competitor data will be dynamically generated]</td>
  </tr>
</table>
<span class="prompt-highlight">COMPETITIVE ADVANTAGE ANALYSIS</span>
- Unique value propositions
- Feature comparison
- Pricing strategies
- User experience differentiators
- Marketing tactics
<span class="prompt-highlight">MARKET POSITIONING</span>
- Industry benchmarks
- Target audience alignment
- Brand perception
- Market gaps
- Opportunity areas
<span class="prompt-highlight">COMPETITOR TECH STACK ANALYSIS</span>
- Platform comparisons
- Plugin and extension usage
- Third-party integrations
- Custom development approaches
- Technical advantages
<span class="prompt-highlight">EMERGING TRENDS IDENTIFICATION</span>
- Industry innovation patterns
- New technologies adoption
- Shifting user expectations
- Evolving design standards
- Future-proofing opportunities
<span class="prompt-subsection">PHASE 4: QUICK WINS & PRIORITIZED BACKLOG</span>
<span class="prompt-highlight">üî• QUICK WINS</span>
- 15 high-impact, low-effort fixes
- Each under 10 words
- All executable within 2 days
<span class="prompt-highlight">üìã BACKLOG TABLE</span>
<table class="audit-table">
  <tr>
    <th>Page</th>
    <th>Issue</th>
    <th>Impact ‚ñ≤</th>
    <th>Effort ‚ñº</th>
    <th>ICE Score</th>
    <th>Fix</th>
    <th>Est. Uplift %</th>
  </tr>
  <tr>
    <td colspan="7">[Backlog items will be dynamically generated]</td>
  </tr>
</table>
<span class="prompt-highlight">IMPLEMENTATION ROADMAP</span>
- Short-term priorities (0-30 days)
- Medium-term initiatives (30-90 days)
- Long-term strategies (90+ days)
- Resource allocation
- Success metrics
<span class="prompt-highlight">TESTING FRAMEWORK</span>
- A/B testing priorities
- Multivariate testing opportunities
- Personalization testing strategies
- Implementation sequence
- Success measurement criteria
<span class="prompt-subsection">PHASE 5: FINAL SCOREBOARD & ACTION PLAN</span>
<span class="prompt-highlight">SECTION SCORES</span>
<table class="audit-table">
  <tr>
    <th>Section</th>
    <th>‚≠ê Score</th>
  </tr>
  <tr>
    <td>Homepage</td>
    <td>‚≠ê‚≠ê‚≠ê‚≠ê</td>
  </tr>
  <tr>
    <td>Product Pages</td>
    <td>‚≠ê‚≠ê‚≠ê</td>
  </tr>
  <tr>
    <td>Checkout</td>
    <td>‚≠ê‚≠ê (or N/A if not applicable)</td>
  </tr>
  <tr>
    <td>Mobile UX</td>
    <td>‚≠ê‚≠ê‚≠ê</td>
  </tr>
  <tr>
    <td>Trust & Persuasion</td>
    <td>‚≠ê‚≠ê‚≠ê‚≠ê</td>
  </tr>
  <tr>
    <td>Lead Gen</td>
    <td>‚≠ê (or N/A if not applicable)</td>
  </tr>
</table>
<span class="prompt-highlight">üèÅ FINAL AUDIT SCORE: ‚≠ê‚≠ê‚òÖ‚òÜ‚òÜ / 5 ‚Üí XX/100</span>
<span class="prompt-highlight">üîß HOW TO REACH 5/5 (OR 100/100)</span>
- Move CTA above fold on product pages
- Add badges beside checkout options
- Eliminate confirm-shaming in popups
- Compress hero images under 200KB
- Publish visible reviews per product
- Fix mobile spacing (iPhone 14 test)
- Add opt-in form on About/Blog
- [Add specific recommendations based on missing elements typical for this business type]
<span class="prompt-subsection">PHASE 6: BONUS FUNNEL DEEP DIVE</span>
<span class="prompt-highlight">AUTOMATIC FUNNEL ANALYSIS</span>
Based on detected website type:
- eCommerce, B2B, Lead Gen, SaaS, Service, Publisher, etc.
- Tech stack: Shopify, WooCommerce, Webflow, etc.
- Primary goals: Purchase, Quote, Demo, Lead, Booking, etc.
<span class="prompt-highlight">DYNAMIC BREAKDOWN</span>
- Funnel Goal & Path
- Page-by-Page Funnel UX Breakdown
- CTA & Offer Friction
- Mobile-Only Funnel Fail Points
- Post-Conversion Clarity & Retention Leaks
- 5 Funnel Killers (Dynamic, Based on UX Stack)
- Future-State Funnel Sketch
<span class="prompt-highlight">SITE-SPECIFIC FOCUS</span>
- <span class="prompt-highlight">eCommerce:</span> Abandoned cart triggers, payment trust, checkout friction (strongly recommend checkout if missing)
- <span class="prompt-highlight">B2B:</span> Form segmentation, follow-up clarity, demo-request loops (strongly recommend lead forms if missing)
- <span class="prompt-highlight">Lead Gen:</span> Low-friction opt-ins, social proof timing, spam trust issues (strongly recommend lead capture if missing)
- <span class="prompt-highlight">SaaS:</span> Onboarding sequence, free trial logic, pricing clarity
- <span class="prompt-highlight">Services:</span> Booking clarity, calendar UX, contact CTA placement
- <span class="prompt-highlight">Blog/Publisher:</span> Reader flow, ad noise fatigue, newsletter conversion
<span class="prompt-highlight">ADVANCED FUNNEL ANALYTICS</span>
- Conversion rate by stage
- Drop-off rate identification
- Time-in-funnel analysis
- Channel-specific performance
- Device-specific conversion paths
<span class="prompt-highlight">MICRO-CONVERSION ANALYSIS</span>
- Secondary conversion actions
- Behavioral triggers
- Engagement metrics
- Retention indicators
- Loyalty building opportunities
<span class="prompt-subsection">PHASE 7: DYNAMIC FOLLOW-UP QUESTIONS</span>
Generate 3-5 final user-specific, insight-driven questions based on:
- Detected funnel weaknesses
- Missed UX opportunities
- Outdated design trends
- Unused persuasion principles
- Stack-specific friction
- Missing conversion elements typical for this business type
<span class="prompt-section">PHASE 8: CONCLUSION & KEY FINDINGS</span>
<span class="prompt-subsection">## üìã EXECUTIVE SUMMARY: KEY FINDINGS & RECOMMENDATIONS</span>
<span class="prompt-highlight">### Critical Issues Identified</span>
- [Bullet point with most critical issue #1]
- [Bullet point with most critical issue #2]
- [Bullet point with most critical issue #3]
- [Include any critical missing elements typical for this business type]
<span class="prompt-highlight">### Top Opportunities</span>
- [Bullet point with highest impact opportunity #1]
- [Bullet point with highest impact opportunity #2]
- [Bullet point with highest impact opportunity #3]
- [Include opportunities related to missing conversion elements if applicable]
<span class="prompt-highlight">### Expected Impact</span>
| Metric | Current | Target | Potential Uplift |
|--------|---------|--------|------------------|
| Conversion Rate | [Current rate - use simulated if not provided] | [Target rate] | [Uplift %] |
| Bounce Rate | [Current rate - use simulated if not provided] | [Target rate] | [Improvement %] |
| Average Order Value | [Current value - use simulated if not provided] | [Target value] | [Increase %] |
<span class="prompt-highlight">### Immediate Next Steps</span>
1. [First action item with timeline]
2. [Second action item with timeline]
3. [Third action item with timeline]
4. [Add step for implementing missing conversion elements if applicable]
<span class="prompt-highlight">### Key Takeaways</span>
- [Brief, impactful takeaway #1]
- [Brief, impactful takeaway #2]
- [Brief, impactful takeaway #3]
- [Include takeaway about comprehensive website analysis]
<span class="prompt-subsection">FINAL OUTPUT STRUCTURE</span>
<span class="prompt-subsection">1. EXECUTIVE SUMMARY</span>
- Key findings overview
- Critical issues identified
- Top opportunities
- Expected impact
- Recommended next steps
<span class="prompt-subsection">2. COMPREHENSIVE AUDIT RESULTS</span>
- Full Audit Tables per Section
- Visual heat maps of issues
- Screenshot annotations of key areas
- Video walkthrough of user journey
- Mobile vs. desktop comparison
- Analysis of all major website sections and pages
<span class="prompt-subsection">3. COMPETITIVE INTELLIGENCE</span>
- Competitor Grid (10-15 competitors)
- Market positioning analysis
- Feature comparison matrix
- UX benchmark report
- Opportunity gap identification
<span class="prompt-subsection">4. ACTIONABLE RECOMMENDATIONS</span>
- Quick Wins (15 items)
- Backlog (ICE-style table)
- Implementation roadmap
- Resource requirements
- Timeline projections
- Recommendations for missing conversion elements if applicable
<span class="prompt-subsection">5. PERFORMANCE METRICS & KPIs</span>
- Current performance baseline (use simulated if not provided)
- Industry benchmarks
- Target metrics
- Measurement methodology
- Reporting cadence
<span class="prompt-subsection">6. DEEP DIVE ANALYSIS</span>
- User behavior patterns
- Psychological triggers
- Technical performance
- Content effectiveness
- Design impact analysis
<span class="prompt-subsection">7. STRATEGIC RECOMMENDATIONS</span>
- Long-term optimization strategy
- Testing framework
- Personalization roadmap
- Technology stack recommendations
- Team structure and skills needed
<span class="prompt-subsection">8. IMPLEMENTATION GUIDANCE</span>
- Step-by-step implementation plan
- Tool recommendations
- Vendor evaluation criteria
- Budget allocation
- Risk mitigation strategies
<span class="prompt-subsection">9. MEASUREMENT & OPTIMIZATION</span>
- Analytics implementation guide
- Testing methodology
- Reporting templates
- Optimization cycle
- Success criteria
<span class="prompt-subsection">10. SPECIALIZED INSIGHTS</span>
- Industry-specific best practices
- Emerging trends to leverage
- Competitive advantages to exploit
- Unique opportunities identified
- Potential threats to address
<span class="prompt-subsection">11. RESOURCES & TOOLS</span>
- Recommended tools stack
- Templates and frameworks
- Educational resources
- Community and support
- Vendor recommendations
<span class="prompt-subsection">12. DYNAMIC DATA COLLECTION GUIDANCE</span>
Based on your specific situation, here's how to gather deeper insights:
<span class="prompt-highlight">For User Behavior Analysis:</span>
- Set up heatmaps using Hotjar or Crazy Egg
- Implement session recording with Microsoft Clarity
- Create user surveys with Typeform or SurveyMonkey
- Conduct user testing with UserTesting.com or Lookback
<span class="prompt-highlight">For Conversion Funnel Analysis:</span>
- Set up goal tracking in Google Analytics
- Create funnel visualization reports
- Implement event tracking for micro-conversions
- Set up enhanced ecommerce tracking
<span class="prompt-highlight">For Competitive Intelligence:</span>
- Use SimilarWeb for traffic analysis
- Monitor competitor changes with Visualping
- Analyze competitor ads with SEMrush or Ahrefs
- Track pricing changes with Prisync
<span class="prompt-highlight">For Performance Monitoring:</span>
- Set up Google PageSpeed Insights monitoring
- Implement Core Web Vitals tracking
- Create uptime monitoring with UptimeRobot
- Set up error tracking with Sentry or Bugsnag
<span class="prompt-highlight">For Personalization Opportunities:</span>
- Segment your audience based on behavior
- Implement dynamic content based on user attributes
- Set up triggered email campaigns
- Create personalized product recommendations
<span class="prompt-subsection">13. ADVANCED BEHAVIORAL PSYCHOLOGY APPLICATION</span>
- Cognitive bias exploitation
- Emotional trigger mapping
- Decision friction reduction
- Persuasion architecture
- Behavioral economics principles
<span class="prompt-subsection">14. CUSTOMER LIFETIME VALUE OPTIMIZATION</span>
- Retention strategy development
- Loyalty program design
- Repeat purchase mechanisms
- Customer journey extension
- Lifetime value maximization
<span class="prompt-subsection">15. CROSS-CHANNEL CONVERSION STRATEGY</span>
- Multi-touch attribution
- Channel synergy optimization
- Offline-to-online conversion paths
- Cross-device experience consistency
- Omnichannel messaging strategy
<span class="prompt-subsection">16. FINAL SCORE & NEXT STEPS</span>
- Final Score
- Fixes to Hit 100
- Funnel Deep Dive
- Dynamic Follow-up Questions
- Implementation priority matrix
<span class="prompt-section">SYSTEM RULES</span>
- All phases must run. No skips.
- All tables must render properly.
- Every output must be blunt, tactical, and structured.
- No soft language. No partials. No hallucinated issues.
- Funnel teardown is mandatory for every audit.
- Voice: Entertaining, unexpected, blunt, punchy. Pull no punches.
- Use 5-star rating system consistently: ‚≠ê = 1 star, ‚òÖ = 0.5 star, ‚òÜ = 0 stars
- <span class="prompt-important">MANDATORY:</span> Execute ALL phases 1-8 in order without stopping or asking for additional input once URL is provided.
- <span class="prompt-important">MANDATORY:</span> Use simulated data where user-provided data is missing, clearly labeled as such.
- <span class="prompt-important">MANDATORY:</span> Perform a comprehensive audit of the ENTIRE WEBSITE, not just the provided URL. Crawl and analyze all accessible pages.
- <span class="prompt-important">EXCEPTION:</span> Only audit specific URLs if the user EXPLICITLY states to limit the audit to certain pages/URLs.
- <span class="prompt-important">MANDATORY:</span> For website types that typically have checkout/lead forms but are missing them, include recommendations to implement these features.
<span class="prompt-section">EXECUTION PROTOCOL</span>
When a user provides their website URL:
1. Immediately begin deep research mode
2. Conduct comprehensive analysis across the ENTIRE WEBSITE (all accessible pages)
3. Generate competitor insights
4. Identify quick wins and prioritize backlog
5. Calculate final scores using the 5-star system (‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê)
6. Perform funnel deep dive
7. Create dynamic follow-up questions
8. Present findings in structured, engaging format
9. Conclude with the Executive Summary section (Phase 8)
<span class="prompt-important">Remember:</span> You're not just analyzing data‚Äîyou're finding money left on the table and providing actionable solutions to capture it. Every recommendation must have a clear "why" and expected ROI impact. You're analyzing the entire website ecosystem, not just a single page.`;
      promptText.innerHTML = content;
    }
    
    // Get random AI model based on priority
    function getRandomAIModel() {
      // Separate models by priority
      const priority1 = aiModels.filter(model => model.priority === 1);
      const priority2 = aiModels.filter(model => model.priority === 2);
      
      // Randomly decide whether to pick from priority 1 or 2 (70% chance for priority 1)
      const usePriority1 = Math.random() < 0.7;
      const modelsToChooseFrom = usePriority1 ? priority1 : priority2;
      
      // Return a random model from the selected priority
      return modelsToChooseFrom[Math.floor(Math.random() * modelsToChooseFrom.length)];
    }
    
    // Update AI model and mode in the how-to-use section
    function updateAIModelInfo() {
      const selectedModel = getRandomAIModel();
      const aiModelElement = document.getElementById('ai-model');
      const aiModeElement = document.getElementById('ai-mode');
      
      // Update model name and make it clickable
      aiModelElement.textContent = selectedModel.name;
      aiModelElement.setAttribute('data-url', selectedModel.url);
      
      // Update mode
      aiModeElement.textContent = selectedModel.mode || 'Deep Research';
    }
    
    // Copy button functionality
    function setupCopyButton() {
      const copyButton = document.getElementById('copy-button');
      const promptText = document.getElementById('prompt-text');
      
      copyButton.addEventListener('click', async () => {
        try {
          // Create a clean text version for copying
          const tables = promptText.querySelectorAll('table');
          let textToCopy = promptText.innerText;
          
          // Replace table content with markdown format for better copying
          tables.forEach(table => {
            const rows = table.querySelectorAll('tr');
            let markdownTable = '';
            
            // Process header row
            if (rows.length > 0) {
              const headerCells = rows[0].querySelectorAll('th, td');
              const headerRow = Array.from(headerCells).map(cell => cell.textContent).join(' | ');
              markdownTable += headerRow + '\n';
              
              // Add separator row
              const separatorRow = Array.from(headerCells).map(() => '---').join(' | ');
              markdownTable += separatorRow + '\n';
              
              // Process data rows
              for (let i = 1; i < rows.length; i++) {
                const dataCells = rows[i].querySelectorAll('td');
                const dataRow = Array.from(dataCells).map(cell => cell.textContent).join(' | ');
                markdownTable += dataRow + '\n';
              }
            }
            
            // Replace the table in the text with the markdown version
            const tableText = table.innerText;
            textToCopy = textToCopy.replace(tableText, markdownTable.trim());
          });
          
          await navigator.clipboard.writeText(textToCopy);
          
          // Visual feedback
          copyButton.classList.add('copied');
          showCopyFeedback();
          setTimeout(() => {
            copyButton.classList.remove('copied');
          }, 2000);
        } catch (err) {
          console.error('Failed to copy text: ', err);
          alert('Failed to copy text to clipboard');
        }
      });
    }
    
    // Setup AI model link functionality - Updated to open in background
    function setupAIModelLink() {
      const aiModelElement = document.getElementById('ai-model');
      const promptText = document.getElementById('prompt-text');
      
      aiModelElement.addEventListener('click', async (e) => {
        e.preventDefault();
        try {
          // Get the URL from data attribute
          const url = aiModelElement.getAttribute('data-url');
          
          // Copy the prompt text first
          const tables = promptText.querySelectorAll('table');
          let textToCopy = promptText.innerText;
          
          // Replace table content with markdown format for better copying
          tables.forEach(table => {
            const rows = table.querySelectorAll('tr');
            let markdownTable = '';
            
            // Process header row
            if (rows.length > 0) {
              const headerCells = rows[0].querySelectorAll('th, td');
              const headerRow = Array.from(headerCells).map(cell => cell.textContent).join(' | ');
              markdownTable += headerRow + '\n';
              
              // Add separator row
              const separatorRow = Array.from(headerCells).map(() => '---').join(' | ');
              markdownTable += separatorRow + '\n';
              
              // Process data rows
              for (let i = 1; i < rows.length; i++) {
                const dataCells = rows[i].querySelectorAll('td');
                const dataRow = Array.from(dataCells).map(cell => cell.textContent).join(' | ');
                markdownTable += dataRow + '\n';
              }
            }
            
            // Replace the table in the text with the markdown version
            const tableText = table.innerText;
            textToCopy = textToCopy.replace(tableText, markdownTable.trim());
          });
          
          await navigator.clipboard.writeText(textToCopy);
          
          // Show feedback
          showCopyFeedback();
          
          // Open the URL in a background tab
          const bgTab = window.open('about:blank', '_blank');
          if (bgTab) {
            bgTab.location.href = url;
            // Keep the focus on the current window
            window.focus();
          } else {
            // If popup blocked, open in a new tab but don't focus it
            const newTab = window.open(url, '_blank');
            if (newTab) {
              newTab.blur();
              window.focus();
            }
          }
        } catch (err) {
          console.error('Failed to open link or copy text: ', err);
          alert('Failed to open link or copy text to clipboard');
        }
      });
    }
    
    // Setup dynamic resizing of prompt container based on scroll
    function setupDynamicResizing() {
      const promptContainer = document.getElementById('prompt-container');
      const promptText = document.getElementById('prompt-text');
      let isExpanded = false;
      let scrollTimeout;
      let lastScrollPosition = 0;
      let scrollDirection = 'down';
      let originalMaxHeight;
      
      // Only apply this functionality on larger screens
      function isLargeScreen() {
        return window.innerWidth >= 1200;
      }
      
      // Store original max height
      function storeOriginalHeight() {
        if (isLargeScreen()) {
          originalMaxHeight = window.getComputedStyle(promptContainer).maxHeight;
        }
      }
      
      // Check if user is scrolling down
      function checkScrollDirection() {
        const currentScrollPosition = promptText.scrollTop;
        
        if (currentScrollPosition > lastScrollPosition) {
          scrollDirection = 'down';
        } else {
          scrollDirection = 'up';
        }
        
        lastScrollPosition = currentScrollPosition;
      }
      
      // Expand the container when scrolling down
      function expandContainer() {
        if (!isExpanded && isLargeScreen()) {
          promptContainer.classList.add('expanded');
          isExpanded = true;
        }
      }
      
      // Collapse the container when scrolling up
      function collapseContainer() {
        if (isExpanded && isLargeScreen()) {
          promptContainer.classList.remove('expanded');
          isExpanded = false;
        }
      }
      
      // Handle scroll events with more aggressive detection
      promptText.addEventListener('scroll', function() {
        if (!isLargeScreen()) return;
        
        checkScrollDirection();
        
        // Clear any existing timeout
        clearTimeout(scrollTimeout);
        
        // If scrolling down and user has scrolled a bit, expand the container
        if (scrollDirection === 'down' && promptText.scrollTop > 50) {
          scrollTimeout = setTimeout(expandContainer, 100); // Reduced timeout for faster response
        } 
        // If scrolling up, immediately collapse the container
        else if (scrollDirection === 'up') {
          collapseContainer();
        }
      });
      
      // Handle window resize
      window.addEventListener('resize', function() {
        if (!isLargeScreen() && isExpanded) {
          collapseContainer();
        } else if (isLargeScreen() && !isExpanded) {
          storeOriginalHeight();
        }
      });
      
      // Initialize
      storeOriginalHeight();
    }
    
    // Enhanced IP detection with fallbacks
    async function getTimezone() {
      try {
        const res1 = await fetch("https://ipapi.co/json/");
        if (res1.ok) {
          const data = await res1.json();
          if (data.timezone) return data.timezone;
        }
      } catch (error) {
        console.warn("ipapi.co failed:", error);
      }
      try {
        const res2 = await fetch("https://api.ipgeolocation.io/timezone?apiKey=7c860389231d440b852035401018616a");
        if (res2.ok) {
          const data = await res2.json();
          if (data.timezone) return data.timezone;
        }
      } catch (error) {
        console.warn("ipgeolocation.io failed:", error);
      }
      try {
        const res3 = await fetch("http://ip-api.com/json/?fields=status,message,timezone", { mode: 'cors' });
        if (res3.ok) {
          const data = await res3.json();
          if (data.status === 'success' && data.timezone) return data.timezone;
        }
      } catch (error) {
        console.warn("ip-api.com failed:", error);
      }
      return Intl.DateTimeFormat().resolvedOptions().timeZone || null;
    }
    
    document.addEventListener("DOMContentLoaded", async function () {
      formatPromptText();
      setupCopyButton();
      setupAIModelLink();
      setupDynamicResizing(); // Setup the dynamic resizing functionality
      
      // Update AI model info
      updateAIModelInfo();
      
      // Refresh AI model info every 10 seconds
      setInterval(updateAIModelInfo, 10000);
      
      const name = getQueryParam("name");
      const greetingElement = document.getElementById("greeting");
      
      let timezone = await getTimezone();
      const now = timezone
        ? new Date(new Date().toLocaleString("en-US", { timeZone: timezone }))
        : new Date();
      
      const greeting = getGreeting(now.getHours());
      
      if (name) {
        // Create greeting structure properly
        greetingElement.innerHTML = '';
        
        const greetingText = document.createElement('span');
        greetingText.textContent = greeting;
        
        const spacer = document.createTextNode(' ');
        const nameSpan = document.createElement('span');
        nameSpan.className = 'name-gradient';
        nameSpan.textContent = name;
        const comma = document.createTextNode(',');
        
        greetingElement.appendChild(greetingText);
        greetingElement.appendChild(spacer);
        greetingElement.appendChild(nameSpan);
        greetingElement.appendChild(comma);
        
        // Apply typewriter effect only to the name
        await typeWriter(nameSpan, name, 120);
      } else {
        greetingElement.innerHTML = "<span class='name-gradient'>" + greeting + "</span>";
      }
      
      // Remove the loader after greeting is set
      const loader = greetingElement.querySelector('.loader');
      if (loader) {
        loader.remove();
      }
      
      const animations = ['weather-rain', 'weather-snow', 'weather-wind', 'weather-sunny'];
      const randomIndex = Math.floor(Math.random() * animations.length);
      const selectedAnimation = animations[randomIndex];
      
      document.querySelectorAll('.weather-rain, .weather-snow, .weather-wind, .weather-sunny').forEach(el => {
        el.style.display = 'none';
      });
      
      document.querySelector(`.${selectedAnimation}`).style.display = 'block';
    });
    
    // Animated favicon
    const size = 32;
    const canvas = document.createElement('canvas');
    canvas.width = size;
    canvas.height = size;
    const ctx = canvas.getContext('2d');
    function drawFavicon(phase) {
      ctx.clearRect(0, 0, size, size);
      ctx.shadowColor = 'rgba(255,255,255,0.6)';
      ctx.shadowBlur = 3;
      const t = (Math.sin(phase) + 1) / 2;
      const startHue = 320, endHue = 210;
      const hue = startHue * (1 - t) + endHue * t;
      const nextHue = endHue * t + startHue * (1 - t);
      const gradient = ctx.createRadialGradient(
        size / 2, size / 2, 1,
        size / 2, size / 2, size / 2
      );
      gradient.addColorStop(0, `hsl(${hue}, 100%, 70%)`);
      gradient.addColorStop(1, `hsl(${nextHue}, 90%, 65%)`);
      ctx.font = '32px serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillStyle = gradient;
      ctx.fillText('‚ú¶', size / 2, size / 2 + 2);
      ctx.shadowBlur = 0;
    }
    function setFavicon() {
      const old = document.getElementById('favicon');
      if (old) old.remove();
      const link = document.createElement('link');
      link.id = 'favicon';
      link.rel = 'icon';
      link.type = 'image/png';
      link.href = canvas.toDataURL('image/png');
      document.head.appendChild(link);
    }
    function animate(time) {
      drawFavicon(time / 3000);
      setFavicon();
      requestAnimationFrame(animate);
    }
    animate(0);
  </script>
</body>
</html>
